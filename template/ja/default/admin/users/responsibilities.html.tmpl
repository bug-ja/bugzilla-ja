[%# This Source Code Form is subject to the terms of the Mozilla Public
  # License, v. 2.0. If a copy of the MPL was not distributed with this
  # file, You can obtain one at http://mozilla.org/MPL/2.0/.
  #
  # This Source Code Form is "Incompatible With Secondary Licenses", as
  # defined by the Mozilla Public License, v. 2.0.
  #%]

[% hidden_products = 0 %]
<table id="user_responsibilities" border="0">
  [% FOREACH item = otheruser.product_responsibilities %]
    [% IF !user.can_see_product(item.product.name) %]
      [% hidden_products = 1 %]
      [% NEXT %]
    [% END %]
    <tbody>
    <tr>
      <th colspan="3" class="product">プロダクト: [% item.product.name FILTER html %]</th>
    </tr>
    <tr>
      <th>コンポーネント</th>
      <th>既定の担当者</th>
      <th>既定の QA コンタクト</th>
      <th>既定の CC</th>
    </tr>
    [% FOREACH component = item.components %]
      <tr>
        <td>
          [% IF user.in_group("editcomponents", component.product_id) %]
            <a href="editcomponents.cgi?action=edit&amp;product=
                     [% item.product.name FILTER uri %]&amp;component=
                     [% component.name FILTER uri %]">
          [% END %]
          [% component.name FILTER html %]
          [% IF user.in_group("editcomponents", component.product_id) %]
            </a>
          [% END %]
        </td>
        [% FOREACH responsibility = ['default_assignee', 'default_qa_contact'] %]
          <td class="center">
            [% component.$responsibility.id == otheruser.id ? "×" : "&nbsp;" %]
          </td>
        [% END %]
        <td class="center">
          [% component.initial_cc.contains(otheruser) ? "X" : "&nbsp;" %]
        </td>
      </tr>
    [% END %]
    </tbody>
  [% END %]
</table>

[% IF hidden_products %]
  <p class="criticalmessages">このユーザはあなたのアカウントでは閲覧できないプロダクトの関係者です (そのプロダクトは一覧には含まれていません)。
  このユーザのこれらのプロダクトにおける役割を編集できる権限を持った管理者に問い合わせる必要があります。</p>
[% END %]
